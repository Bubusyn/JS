<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>user-details</title>
</head>
<body>

<h1> user-details </h1>

<script>
    let url = new URL(location.href);
    console.log(url);
    let users = JSON.parse(url.searchParams.get('data'));
    console.log(data);
    let mineDiv = document.createElement('div');
    mineDiv.classList.add('mine');
    document.body.appendChild(mineDiv);

    let userDetails = document.createElement('div');
    userDetails.classList.add('user_details');
    mineDiv.appendChild(userDetails);

    let details = document.getElementsByClassName('users_details') [0];


    details.innerHTML =`
                        <h1>${user.id} - ${user.name}</h1>
                        <h2>username: ${user.username}</h2>
                        <h3>email: ${user.email}</h3>
                        <ul><h3>address:</h3>
                        <li>street: ${user.address.street};</li>
                        <li>suite: ${user.address.suite};</li>
                        <li>city: ${user.address.city};</li>
                        <li>zipcode: ${user.address.zipcode};</li>
                        <ul><h4>geo:</h4>
                        <li>lat: ${user.address.geo.lat}</li>
                        <li>lng: ${user.address.geo.lng}</li>
                        </ul>
                        </ul>
                        <p><h3>Phone:</h3> ${user.phone}</p>
                        <p><h3>website:</h3>  ${user.website}</p>
                        <ul><h3>company:</h3>
                        <li>${user.company.name};</li>
                        <li>catchPhrase: ${user.company.catchPhrase};</li>
                        <li>bs: ${user.company.bs};</li>
                        </ul>`

    let detailButton = document.createElement('button');
    detailButton.innerText = 'post of current user';
    userDetails.appendChild(detailButton);

    let postDiv = document.createElement('div');
    postDiv.classList.add('post');
    document.body.appendChild(postDiv);

    detailButton.onclick = (data) =>{


        fetch(`https://jsonplaceholder.typicode.com/users/${'id'}/posts`)
            .then(details => details.json())
            .then(posts => {

                for (let post of posts){

                let postDiv = document.createElement('div');
                postDiv.classList.add ('pbl');
                postDiv.innerText = `${pbl}`;
                postDiv.appendChild(postDiv);

                let postButton = document.createElement('button');
                postButton.innerText = 'post-details';

                postDiv.appendChild(postButton);

                postButton.onclick = () => {
                console.log(post)
                    location.href = `post-details.html?data=${JSON.stringify(post)}`

                }
            }
            detailButton.disabled = true;
    })
    }



</script>

</body>
</html>